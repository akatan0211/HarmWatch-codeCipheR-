<!doctype html>
<html>
<head><meta charset="utf-8"><title>Feedback Collector</title></head>
<body>
  <h3>Feedback Collector</h3>
  <p>Help improve research by giving quick feedback on posts. This is opt-in â€” you can stop anytime.</p>
  <label><input type="checkbox" id="consent" /> I consent to share anonymized feedback</label>
  <br/><br/>
  <label>Prompt frequency:
    <select id="freq">
      <option value="1">Low (1/day)</option>
      <option value="5">Medium (5/day)</option>
      <option value="10" selected>High (10/day)</option>
    </select>
  </label>
  <br/><br/>
  <button id="save">Save</button>
  <script>
    document.getElementById('save').addEventListener('click', async () => {
      const consent = document.getElementById('consent').checked;
      const freq = document.getElementById('freq').value;
      await chrome.storage.local.set({consent: consent, freq: parseInt(freq), lastPrompt: 0});
      alert('Saved preferences.');
    });
    chrome.storage.local.get(['consent','freq'], (res) => {
      if(res.consent) document.getElementById('consent').checked = res.consent;
      if(res.freq) document.getElementById('freq').value = res.freq;
    });
  </script>
</body>
</html>
